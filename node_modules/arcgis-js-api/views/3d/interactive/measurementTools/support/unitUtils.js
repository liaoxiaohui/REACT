// COPYRIGHT © 2018 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.8/esri/copyright.txt for details.

define(["require","exports","dojo/i18n!./nls/Units","dojo/number","../../../../../geometry/support/scaleUtils"],function(e,n,i,r,t){function s(e,n,i){return e*d[i].units[n].inBaseUnits}function a(e,n,i){return e/d[i].units[n].inBaseUnits}var u,c={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1853.184},"us-feet":{inBaseUnits:1200/3937}},o=function(e){return e*e},f={"square-millimeters":{inBaseUnits:o(.001)},"square-centimeters":{inBaseUnits:o(.01)},"square-decimeters":{inBaseUnits:o(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:o(1e3)},"square-inches":{inBaseUnits:o(.0254)},"square-feet":{inBaseUnits:o(.3048)},"square-yards":{inBaseUnits:o(.9144)},"square-miles":{inBaseUnits:o(1609.344)},"square-us-feet":{inBaseUnits:o(1200/3937)},acres:{inBaseUnits:.0015625*o(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}},m=function(e){return e*e*e},l={liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*m(.001)},"cubic-centimeters":{inBaseUnits:1e3*m(.01)},"cubic-decimeters":{inBaseUnits:1e3*m(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*m(1e3)},"cubic-inches":{inBaseUnits:1e3*m(.0254)},"cubic-feet":{inBaseUnits:1e3*m(.3048)},"cubic-yards":{inBaseUnits:1e3*m(.9144)},"cubic-miles":{inBaseUnits:1e3*m(1609.344)}},U={radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}},d={length:{baseUnit:"meters",units:c},area:{baseUnit:"square-meters",units:f},volume:{baseUnit:"liters",units:l},angle:{baseUnit:"radians",units:U}},B=function(){var e={};for(var n in d)for(var i in d[n].units)e[i]=n;return e}();return function(e){function n(e){var n=B[e];if(n)return n;throw new Error("unknown measure")}function u(e){return d[e].baseUnit}function c(e){return u(n(e))}function o(e,i){return void 0===i&&(i=null),i=i||n(e),d[i].baseUnit===e}function f(e,i,r){if(i===r)return e;var t=n(i);if(t!==n(r))throw new Error("incompatible units");var u=o(i,t)?e:s(e,i,t);return o(r,t)?u:a(u,r,t)}function m(e,n){return i.units[e][n]}function l(e,n,i,t){return void 0===i&&(i=2),void 0===t&&(t="abbr"),r.format(e,{places:i})+" "+m(n,t)}function U(e,n){return f(e,n,"meters")<3e3?"meters":"kilometers"}function v(e,n){return f(e,n,"meters")<1e5?"meters":"kilometers"}function b(e,n,i,r){void 0===i&&(i=2),void 0===r&&(r="abbr");var t=U(e,n);return l(f(e,n,t),t,i,r)}function h(e,n,i,r){void 0===i&&(i=2),void 0===r&&(r="abbr");var t=v(e,n);return l(f(e,n,t),t,i,r)}function p(e,n){return f(e,n,"feet")<1e3?"feet":"miles"}function q(e,n){return f(e,n,"feet")<1e5?"feet":"miles"}function g(e,n,i,r){void 0===i&&(i=2),void 0===r&&(r="abbr");var t=p(e,n);return l(f(e,n,t),t,i,r)}function k(e,n,i,r){void 0===i&&(i=2),void 0===r&&(r="abbr");var t=q(e,n);return l(f(e,n,t),t,i,r)}function M(e,n){return f(e,n,"square-meters")<3e6?"square-meters":"square-kilometers"}function y(e,n,i,r){void 0===i&&(i=2),void 0===r&&(r="abbr");var t=M(e,n);return l(f(e,n,t),t,i,r)}function L(e,n){return f(e,n,"square-feet")<1e6?"square-feet":"square-miles"}function F(e,n,i,r){void 0===i&&(i=2),void 0===r&&(r="abbr");var t=L(e,n);return l(f(e,n,t),t,i,r)}function I(n,i,r){void 0===r&&(r=2);var t=e.convertUnit(n,i,"degrees"),s=t-Math.floor(t);t-=s,s*=60;var a=s-Math.floor(s);return s-=a,a*=60,t.toFixed()+"° "+s.toFixed()+"' "+a.toFixed(r)+'"'}function w(e){if(!e)return null;var n=t.getUnitString(e);switch(n){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric";case null:case void 0:return null}return null}e.measureForUnit=n,e.baseUnitForMeasure=u,e.baseUnitForUnit=c,e.isBaseUnit=o,e.convertUnit=f,e.unitName=m,e.formatDecimal=l,e.preferredMetricLengthUnit=U,e.preferredMetricVerticalLengthUnit=v,e.formatMetricLength=b,e.formatMetricVerticalLength=h,e.preferredImperialLengthUnit=p,e.preferredImperialVerticalLengthUnit=q,e.formatImperialLength=g,e.formatImperialVerticalLength=k,e.preferredMetricAreaUnit=M,e.formatMetricArea=y,e.preferredImperialAreaUnit=L,e.formatImperialArea=F,e.formatDMS=I,e.defaultUnitForSpatialReference=w}(u||(u={})),u});